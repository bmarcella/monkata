"use strict";(self.webpackChunkListee_Angular=self.webpackChunkListee_Angular||[]).push([[458],{6458:(q,p,r)=>{r.r(p),r.d(p,{EditUserModule:()=>b});var g=r(6814),c=r(5959),m=r(5861),u=r(9862),h=r(8613),l=r(2712),e=r(9468),_=r(6572),v=r(932),f=r(8732),Z=r(4913),C=r(3680),d=r(95);const U=function(i){return{width:i}};function M(i,J){if(1&i&&(e.TgZ(0,"div",30)(1,"div",31),e._uU(2),e.qZA()()),2&i){const s=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(3,U,s.progress+"%")),e.uIk("aria-valuenow",s.progress),e.xp6(1),e.hij(" ",s.progress,"% ")}}const T=function(){return{standalone:!0}};function w(i,J){if(1&i){const s=e.EpF();e.TgZ(0,"div",32)(1,"div")(2,"h5"),e._uU(3,"Informations personnelles"),e.qZA(),e._UZ(4,"hr"),e.TgZ(5,"div",33)(6,"div",34)(7,"label",35),e._uU(8,"Pr\xe9nom"),e.qZA(),e.TgZ(9,"div",20)(10,"span",21),e._UZ(11,"i",36),e.qZA(),e.TgZ(12,"input",37),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.firstName=t)}),e.qZA()()(),e.TgZ(13,"div",34)(14,"label",35),e._uU(15,"Nom"),e.qZA(),e.TgZ(16,"div",20)(17,"span",21),e._UZ(18,"i",36),e.qZA(),e.TgZ(19,"input",37),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.lastName=t)}),e.qZA()()(),e.TgZ(20,"div",34)(21,"label",35),e._uU(22,"Sexe"),e.qZA(),e.TgZ(23,"div",20)(24,"mat-select",38),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.sexe=t)}),e.TgZ(25,"mat-option",39),e._uU(26," Masculin "),e.qZA(),e.TgZ(27,"mat-option",40),e._uU(28," Feminin "),e.qZA(),e.TgZ(29,"mat-option",41),e._uU(30," Non determin\xe9 "),e.qZA()()()()(),e.TgZ(31,"div",42)(32,"div",43)(33,"div",18)(34,"label",44),e._uU(35,"NIN"),e.qZA(),e.TgZ(36,"div",20)(37,"span",21),e._UZ(38,"i",45),e.qZA(),e.TgZ(39,"input",46),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.nin=t)}),e.qZA()()()(),e.TgZ(40,"div",43)(41,"div",18)(42,"label",44),e._uU(43,"NIF"),e.qZA(),e.TgZ(44,"div",20)(45,"span",21),e._UZ(46,"i",47),e.qZA(),e.TgZ(47,"input",46),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.nif=t)}),e.qZA()()()(),e.TgZ(48,"div",43)(49,"div",18)(50,"label",48),e._uU(51,"No Passeport"),e.qZA(),e.TgZ(52,"div",49),e._UZ(53,"i",45),e.TgZ(54,"input",37),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.passport=t)}),e.qZA()()()()(),e.TgZ(55,"h5"),e._uU(56,"Coordon\xe9es et autres"),e.qZA(),e._UZ(57,"hr"),e.TgZ(58,"div",33)(59,"div",50)(60,"div",51)(61,"label",52),e._uU(62,"Pays"),e.qZA(),e.TgZ(63,"div",20)(64,"span",21),e._UZ(65,"i",53),e.qZA(),e.TgZ(66,"input",37),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.country=t)}),e.qZA()()()(),e.TgZ(67,"div",50)(68,"div",51)(69,"label",54),e._uU(70,"Ville"),e.qZA(),e.TgZ(71,"div",20)(72,"span",21),e._UZ(73,"i",55),e.qZA(),e.TgZ(74,"input",37),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.city=t)}),e.qZA()()()(),e.TgZ(75,"div",50)(76,"div",18)(77,"label",56),e._uU(78,"Etes vous pr\xeat a se relocaliser? "),e.qZA(),e.TgZ(79,"div",57)(80,"div",58)(81,"ul")(82,"li")(83,"label",59)(84,"input",60),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.relocate=t)}),e.qZA()()()()()()()()(),e.TgZ(85,"div",42)(86,"div",43)(87,"div",18)(88,"label",44),e._uU(89,"Cellulaire"),e.qZA(),e.TgZ(90,"div",20)(91,"span",21),e._UZ(92,"i",61),e.qZA(),e.TgZ(93,"input",62),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.telephone_a=t)}),e.qZA()()()(),e.TgZ(94,"div",43)(95,"div",18)(96,"label",44),e._uU(97,"Domicile"),e.qZA(),e.TgZ(98,"div",20)(99,"span",21),e._UZ(100,"i",61),e.qZA(),e.TgZ(101,"input",62),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.telephone_b=t)}),e.qZA()()()(),e.TgZ(102,"div",43)(103,"div",18)(104,"label",48),e._uU(105,"Email de contact"),e.qZA(),e.TgZ(106,"div",49),e._UZ(107,"i",63),e.TgZ(108,"input",64),e.NdJ("ngModelChange",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.cv.email_contact=t)}),e.qZA()()()()(),e.TgZ(109,"button",29),e.NdJ("click",function(t){e.CHM(s);const o=e.oxw();return e.KtG(o.SaveUserCV(t))}),e._uU(110," Modifier "),e.qZA()()()}if(2&i){const s=e.oxw();e.xp6(12),e.Q6J("ngModel",s.cv.firstName),e.xp6(7),e.Q6J("ngModel",s.cv.lastName),e.xp6(5),e.Q6J("ngModel",s.cv.sexe)("ngModelOptions",e.DdM(13,T)),e.xp6(15),e.Q6J("ngModel",s.cv.nin),e.xp6(8),e.Q6J("ngModel",s.cv.nif),e.xp6(7),e.Q6J("ngModel",s.cv.passport),e.xp6(12),e.Q6J("ngModel",s.cv.country),e.xp6(8),e.Q6J("ngModel",s.cv.city),e.xp6(10),e.Q6J("ngModel",s.cv.relocate),e.xp6(9),e.Q6J("ngModel",s.cv.telephone_a),e.xp6(8),e.Q6J("ngModel",s.cv.telephone_b),e.xp6(7),e.Q6J("ngModel",s.cv.email_contact)}}const A=[{path:"",component:(()=>{class i{constructor(s,n,t,o,a){this.auth=s,this.router=n,this.route=t,this.crud=o,this.aUI=a,this.routes=h._,this.toggleData=!1,this.toggle=!1,this.pass={newPassword:"",newPassword2:"",oldPassword:""},this.user=this.auth.profil(),this.user&&(this.avatar=this.auth.getAvatar(this.user.id))}togglePassword(){this.toggleData=!this.toggleData}icon(){this.toggle=!this.toggle}ngOnInit(){this.getCv()}getCv(){const s=(0,l.Ax)("memploi","cv/get");this.crud.get(s).then(n=>{this.cv=n,this.user&&(this.avatar=this.auth.getAvatar(n.id)),console.log(n)}).catch(n=>console.log(n))}SaveUserCV(s){const n=(0,l.Ax)("memploi","cv/edit");this.crud.post(n,{firstName:this.cv.firstName,lastName:this.cv.lastName,sexe:this.cv.sexe,city:this.cv.city,country:this.cv.country,telephone_a:this.cv.telephone_a,telephone_b:this.cv.telephone_b,relocate:this.cv.relocate,nif:this.cv.nif,nin:this.cv.nin,passport:this.cv.passport},s).then(o=>{this.aUI.show({active:!0,message:"Profil modifi\xe9 avec succ\xe8s!",type:"success",pos:"top-right"})}).catch(o=>{this.aUI.show({active:!0,message:o,type:"success",pos:"top-right"}),console.log(o)})}onFileSelected(s){this.selectedFile=s.target.files[0];const n=new FileReader;n.onload=t=>{this.avatar=t.target.result},n.readAsDataURL(this.selectedFile),this.upload(s),console.log(this.selectedFile)}upload(s){this.progress=0;const n=new FormData;n.append("file",this.selectedFile);const t=(0,l.Ax)("memploi","cv/changeAvatar");this.crud.upload(t,n,s).subscribe(o=>{o.type===u.dt.UploadProgress?this.progress=Math.round(100*o.loaded/o.total):o instanceof u.Zn&&(console.log(o),this.progress=void 0,this.message=o.body.message,this.aUI.show({active:!0,message:"Avatar modifi\xe9 avec succ\xe8s!",type:"success",pos:"top-right"}))},o=>{console.log(o),this.progress=0,this.message=o.error&&o.error.message?o.error.message:"Could not upload the file!",this.aUI.show({active:!0,message:this.message,type:"danger",pos:"top-right"}),this.selectedFile=void 0})}changePassword(s){var n=this;return(0,m.Z)(function*(){if(""==n.pass.newPassword||""==n.pass.newPassword2||""==n.pass.newPassword)return void n.aUI.show({active:!0,message:"Vous devez remplir tous les champs.",type:"danger",pos:"top-right"});if(n.pass.newPassword!=n.pass.newPassword2)return void n.aUI.show({active:!0,message:"Mot de passe non identique.",type:"danger",pos:"top-right"});const t=(0,l.Ax)("memploi","cv/refresh");yield n.crud.get(t,s);const o=(0,l.Ax)("memploi","cv/changePassword");n.crud.post(o,n.pass,s).then(a=>{console.log(a),n.aUI.show({active:!0,message:a.message,type:a.type,pos:"top-right"}),n.pass={newPassword:"",newPassword2:"",oldPassword:""}}).catch(a=>{console.log(a)})})()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(_.M),e.Y36(c.F0),e.Y36(c.gz),e.Y36(v.I),e.Y36(f.c))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-user"]],decls:51,vars:10,consts:[[1,"profile-content"],[1,"row","dashboard-info"],[1,"col-lg-9"],[1,"card","dash-cards"],[1,"card-header"],[1,"card-body"],["class","progress my-3 col-md-6",4,"ngIf"],[1,"profile-photo"],[1,"profile-img"],[1,"settings-upload-img"],["alt","profile",3,"src"],[1,"settings-upload-btn"],["type","file","accept","image/*","name","image","id","file",1,"hide-input","image-upload",3,"change"],["for","file",1,"file-upload"],["class","profile-form",4,"ngIf"],[1,"col-lg-3"],[1,"profile-sidebar"],[1,"card"],[1,"input-block"],["for","Password",1,"col-form-label"],[1,"pass-group","group-img"],[1,"lock-icon"],[1,"feather-lock"],["type","password","placeholder","Ancien mot de passe",1,"form-control","pass-input",3,"ngModel","ngModelChange"],[1,"input-block","mt-4"],["value","",1,"form-control","pass-input",3,"ngModel","type","ngModelChange"],["tabindex","0",3,"ngClass","click","keydown.enter","keydown.space"],[1,"input-block","mt-4","mb-4"],["for","New",1,"col-form-label"],[1,"btn","btn-primary",3,"click"],[1,"progress","my-3","col-md-6"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped",3,"ngStyle"],[1,"profile-form"],[1,"row","mb-4","mt-4"],[1,"input-block","col-lg-4","col-md-4"],["for","Name",1,"col-form-label"],[1,"feather-user"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","sexe","placeholder","Selectioner votre sexe",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["value","masculin"],["value","feminin"],["value","non_determine"],[1,"row","mb-4"],[1,"col-lg-4","col-md-4"],["for","phone",1,"col-form-label"],[1,"fa","fa-id-card"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa","fa-id-card"],["for","Email",1,"col-form-label"],[1,"group-img"],[1,"col-md-4"],[1,"input-block","formlast-input"],["for","fa-google-plus-g",1,"col-form-label"],[1,"fa","fa-globe"],["for","instagram",1,"col-form-label"],[1,"fa","fa-location-arrow"],["for","Category",1,"col-form-label","label-heading"],[1,"row","category-listing"],[1,"col-lg-4"],[1,"custom_check"],["type","checkbox","name","wireless-internet",3,"ngModel","ngModelChange"],[1,"feather-phone-call"],["type","tel",1,"form-control",3,"ngModel","ngModelChange"],[1,"feather-mail"],["disabled","true","type","text",1,"form-control",3,"ngModel","ngModelChange"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6,"Profile Details"),e.qZA()(),e.TgZ(7,"div",5),e.YNc(8,M,3,5,"div",6),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9),e._UZ(12,"img",10),e.qZA(),e.TgZ(13,"div",11)(14,"input",12),e.NdJ("change",function(a){return t.onFileSelected(a)}),e.qZA(),e.TgZ(15,"label",13),e._uU(16,"Avatar"),e.qZA()()()(),e.YNc(17,w,111,14,"div",14),e.qZA()()(),e.TgZ(18,"div",15)(19,"div",16)(20,"div",17)(21,"div",4)(22,"h4"),e._uU(23,"Modifier Mot de passe"),e.qZA()(),e.TgZ(24,"div",5)(25,"div")(26,"div",18)(27,"label",19),e._uU(28,"Ancien mot de passe"),e.qZA(),e.TgZ(29,"div",20)(30,"span",21),e._UZ(31,"i",22),e.qZA(),e.TgZ(32,"input",23),e.NdJ("ngModelChange",function(a){return t.pass.oldPassword=a}),e.qZA()()(),e.TgZ(33,"div",24)(34,"label",19),e._uU(35,"Nouveau mot de passe "),e.qZA(),e.TgZ(36,"div",20)(37,"span",21),e._UZ(38,"i",22),e.qZA(),e.TgZ(39,"input",25),e.NdJ("ngModelChange",function(a){return t.pass.newPassword=a}),e.qZA(),e.TgZ(40,"span",26),e.NdJ("click",function(){return t.togglePassword()})("keydown.enter",function(){return t.togglePassword()})("keydown.space",function(){return t.togglePassword()}),e.qZA()()(),e.TgZ(41,"div",27)(42,"label",28),e._uU(43,"Confirm\xe9 nouveau mot de passe"),e.qZA(),e.TgZ(44,"div",20)(45,"span",21),e._UZ(46,"i",22),e.qZA(),e.TgZ(47,"input",25),e.NdJ("ngModelChange",function(a){return t.pass.newPassword2=a}),e.qZA(),e.TgZ(48,"span",26),e.NdJ("click",function(){return t.icon()})("keydown.enter",function(){return t.icon()})("keydown.space",function(){return t.icon()}),e.qZA()()(),e.TgZ(49,"button",29),e.NdJ("click",function(a){return t.changePassword(a)}),e._uU(50," Modifier mot de passe "),e.qZA()()()()()()()()),2&n&&(e.xp6(8),e.Q6J("ngIf",t.progress>0),e.xp6(4),e.Q6J("src",t.avatar,e.LSH),e.xp6(5),e.Q6J("ngIf",t.cv),e.xp6(15),e.Q6J("ngModel",t.pass.oldPassword),e.xp6(7),e.Q6J("ngModel",t.pass.newPassword)("type",t.toggleData?"text":"password"),e.xp6(1),e.Q6J("ngClass",!0===t.toggleData?"toggle-password feather-eye":"toggle-password feather-eye-off"),e.xp6(7),e.Q6J("ngModel",t.pass.newPassword2)("type",t.toggle?"text":"password"),e.xp6(1),e.Q6J("ngClass",!0===t.toggle?"toggle-password feather-eye":"toggle-password feather-eye-off"))},dependencies:[g.mk,g.O5,g.PC,Z.gD,C.ey,d.Fj,d.wV,d.Wl,d.JJ,d.On]})}return i})()}];let y=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(A),c.Bz]})}return i})();var x=r(4983);let b=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[g.ez,y,x.m]})}return i})()}}]);